Plan: 2 to add, 6 to modify, 0 to drop.

Summary by type:
  tables: 0 to add, 6 to modify, 0 to drop
  indexes: 2 to add, 0 to modify, 0 to drop

Tables:
  ~ public.title
  ~ public.department
  ~ public.employee
  ~ public.dept_emp
  ~ public.dept_manager
  ~ public.salary

Indexes:
  + public.employee.idx_employee_hire_date
  + public.salary.idx_salary_amount

DDL to be executed:
--------------------------------------------------


ALTER TABLE title DROP CONSTRAINT title_pkey;


ALTER TABLE public.title 
ADD CONSTRAINT title_emp_no_pkey PRIMARY KEY (emp_no, title, from_date);


ALTER TABLE department DROP CONSTRAINT department_pkey;


ALTER TABLE department 
ADD CONSTRAINT department_dept_name_key UNIQUE (dept_name);


ALTER TABLE public.department 
ADD CONSTRAINT department_dept_no_pkey PRIMARY KEY (dept_no);


ALTER TABLE employee DROP CONSTRAINT employee_pkey;


ALTER TABLE employee ALTER COLUMN emp_no SET DEFAULT nextval('public.employee_emp_no_seq');


ALTER TABLE public.employee 
ADD CONSTRAINT employee_emp_no_pkey PRIMARY KEY (emp_no);


ALTER TABLE employee 
ADD CONSTRAINT employee_gender_check CHECK (gender IN ('M', 'F'));


CREATE INDEX idx_employee_hire_date ON employee (hire_date);


ALTER TABLE dept_emp DROP CONSTRAINT dept_emp_pkey;


ALTER TABLE public.dept_emp 
ADD CONSTRAINT dept_emp_emp_no_pkey PRIMARY KEY (emp_no, dept_no);


ALTER TABLE dept_manager DROP CONSTRAINT dept_manager_pkey;


ALTER TABLE public.dept_manager 
ADD CONSTRAINT dept_manager_emp_no_pkey PRIMARY KEY (emp_no, dept_no);


ALTER TABLE salary DROP CONSTRAINT salary_pkey;


ALTER TABLE public.salary 
ADD CONSTRAINT salary_emp_no_pkey PRIMARY KEY (emp_no, from_date);


CREATE INDEX idx_salary_amount ON salary (amount);
--------------------------------------------------
