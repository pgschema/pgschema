{
  "version": "1.0.0",
  "pgschema_version": "1.0.0",
  "created_at": "2025-08-15T19:52:10+08:00",
  "source_fingerprint": {
    "hash": "965b1131737c955e24c7f827c55bd78e4cb49a75adfd04229e0ba297376f5085"
  },
  "groups": [
    {
      "steps": [
        {
          "statements": [
            {
              "sql": "CREATE OR REPLACE PROCEDURE update_user_status(\n    user_id integer,\n    new_status text\n)\nLANGUAGE plpgsql\nAS $$\nBEGIN\n    UPDATE users \n    SET status = new_status, updated_at = NOW() \n    WHERE id = user_id;\n    \n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'User not found: %', user_id;\n    END IF;\n    \n    COMMIT;\nEND;\n$$",
              "can_run_in_transaction": true
            }
          ],
          "type": "procedure",
          "operation": "create",
          "path": "public.update_user_status",
          "source": {
            "schema": "public",
            "name": "update_user_status",
            "definition": "\nBEGIN\n    UPDATE users \n    SET status = new_status, updated_at = NOW() \n    WHERE id = user_id;\n    \n    IF NOT FOUND THEN\n        RAISE EXCEPTION 'User not found: %', user_id;\n    END IF;\n    \n    COMMIT;\nEND;\n",
            "language": "plpgsql",
            "arguments": "user_id integer, new_status text"
          }
        }
      ]
    }
  ]
}
