{
  "version": "1.0.0",
  "pgschema_version": "1.0.0",
  "created_at": "1970-01-01T00:00:00Z",
  "source_fingerprint": {
    "hash": "d68199fd76a438d5ea61fc1e493629e9ed3bd0f7e39fbc50534b8d1336d3304a"
  },
  "groups": [
    {
      "steps": [
        {
          "statements": [
            {
              "sql": "COMMENT ON TABLE categories IS 'Hierarchical category system for posts'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.comment",
          "operation": "alter",
          "path": "public.categories",
          "source": {
            "Table": {
              "schema": "public",
              "name": "categories",
              "type": "BASE_TABLE",
              "columns": [
                {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Category unique identifier"
                },
                {
                  "name": "name",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 100,
                  "comment": "Category display name"
                },
                {
                  "name": "description",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true,
                  "comment": "Optional category description"
                },
                {
                  "name": "parent_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": true,
                  "comment": "Parent category for hierarchical structure"
                },
                {
                  "name": "created_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true,
                  "default_value": "CURRENT_TIMESTAMP",
                  "comment": "Category creation timestamp"
                }
              ],
              "constraints": {
                "categories_parent_id_fkey": {
                  "schema": "public",
                  "table": "categories",
                  "name": "categories_parent_id_fkey",
                  "type": "FOREIGN_KEY",
                  "columns": [
                    {
                      "name": "parent_id",
                      "position": 1
                    }
                  ],
                  "referenced_schema": "public",
                  "referenced_table": "categories",
                  "referenced_columns": [
                    {
                      "name": "id",
                      "position": 1
                    }
                  ],
                  "delete_rule": "NO ACTION",
                  "update_rule": "NO ACTION"
                },
                "categories_pkey": {
                  "schema": "public",
                  "table": "categories",
                  "name": "categories_pkey",
                  "type": "PRIMARY_KEY",
                  "columns": [
                    {
                      "name": "id",
                      "position": 1
                    }
                  ]
                }
              },
              "indexes": {
                "idx_categories_parent": {
                  "schema": "public",
                  "table": "categories",
                  "name": "idx_categories_parent",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "parent_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Index for hierarchical category queries"
                }
              },
              "triggers": {},
              "rls_enabled": false,
              "policies": {},
              "dependencies": null,
              "comment": "Hierarchical category system for posts",
              "is_partitioned": false
            },
            "AddedColumns": [],
            "DroppedColumns": [],
            "ModifiedColumns": [
              {
                "Old": {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "precision": 32,
                  "scale": 0
                },
                "New": {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Category unique identifier"
                }
              },
              {
                "Old": {
                  "name": "name",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 100
                },
                "New": {
                  "name": "name",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 100,
                  "comment": "Category display name"
                }
              },
              {
                "Old": {
                  "name": "description",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true
                },
                "New": {
                  "name": "description",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true,
                  "comment": "Optional category description"
                }
              },
              {
                "Old": {
                  "name": "parent_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": true,
                  "precision": 32,
                  "scale": 0
                },
                "New": {
                  "name": "parent_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": true,
                  "comment": "Parent category for hierarchical structure"
                }
              },
              {
                "Old": {
                  "name": "created_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true,
                  "default_value": "CURRENT_TIMESTAMP"
                },
                "New": {
                  "name": "created_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true,
                  "default_value": "CURRENT_TIMESTAMP",
                  "comment": "Category creation timestamp"
                }
              }
            ],
            "AddedConstraints": [],
            "DroppedConstraints": [],
            "ModifiedConstraints": [],
            "AddedIndexes": [],
            "DroppedIndexes": [],
            "ModifiedIndexes": [
              {
                "Old": {
                  "schema": "public",
                  "table": "categories",
                  "name": "idx_categories_parent",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "parent_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false
                },
                "New": {
                  "schema": "public",
                  "table": "categories",
                  "name": "idx_categories_parent",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "parent_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Index for hierarchical category queries"
                }
              }
            ],
            "AddedTriggers": [],
            "DroppedTriggers": [],
            "ModifiedTriggers": [],
            "AddedPolicies": [],
            "DroppedPolicies": [],
            "ModifiedPolicies": [],
            "RLSChanges": [],
            "CommentChanged": true,
            "OldComment": "",
            "NewComment": "Hierarchical category system for posts"
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN categories.id IS 'Category unique identifier'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.categories.id",
          "source": {
            "Old": {
              "name": "id",
              "position": 1,
              "data_type": "integer",
              "is_nullable": false,
              "precision": 32,
              "scale": 0
            },
            "New": {
              "name": "id",
              "position": 1,
              "data_type": "integer",
              "is_nullable": false,
              "comment": "Category unique identifier"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN categories.name IS 'Category display name'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.categories.name",
          "source": {
            "Old": {
              "name": "name",
              "position": 2,
              "data_type": "varchar",
              "is_nullable": false,
              "max_length": 100
            },
            "New": {
              "name": "name",
              "position": 2,
              "data_type": "varchar",
              "is_nullable": false,
              "max_length": 100,
              "comment": "Category display name"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN categories.description IS 'Optional category description'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.categories.description",
          "source": {
            "Old": {
              "name": "description",
              "position": 3,
              "data_type": "text",
              "is_nullable": true
            },
            "New": {
              "name": "description",
              "position": 3,
              "data_type": "text",
              "is_nullable": true,
              "comment": "Optional category description"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN categories.parent_id IS 'Parent category for hierarchical structure'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.categories.parent_id",
          "source": {
            "Old": {
              "name": "parent_id",
              "position": 4,
              "data_type": "integer",
              "is_nullable": true,
              "precision": 32,
              "scale": 0
            },
            "New": {
              "name": "parent_id",
              "position": 4,
              "data_type": "integer",
              "is_nullable": true,
              "comment": "Parent category for hierarchical structure"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN categories.created_at IS 'Category creation timestamp'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.categories.created_at",
          "source": {
            "Old": {
              "name": "created_at",
              "position": 5,
              "data_type": "timestamp",
              "is_nullable": true,
              "default_value": "CURRENT_TIMESTAMP"
            },
            "New": {
              "name": "created_at",
              "position": 5,
              "data_type": "timestamp",
              "is_nullable": true,
              "default_value": "CURRENT_TIMESTAMP",
              "comment": "Category creation timestamp"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON INDEX idx_categories_parent IS 'Index for hierarchical category queries'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.index.comment",
          "operation": "alter",
          "path": "public.categories.idx_categories_parent",
          "source": {
            "Old": {
              "schema": "public",
              "table": "categories",
              "name": "idx_categories_parent",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "parent_id",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false
            },
            "New": {
              "schema": "public",
              "table": "categories",
              "name": "idx_categories_parent",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "parent_id",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false,
              "comment": "Index for hierarchical category queries"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON TABLE posts IS 'Blog posts and articles'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.comment",
          "operation": "alter",
          "path": "public.posts",
          "source": {
            "Table": {
              "schema": "public",
              "name": "posts",
              "type": "BASE_TABLE",
              "columns": [
                {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Unique post identifier"
                },
                {
                  "name": "title",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 200,
                  "comment": "Post title, max 200 characters"
                },
                {
                  "name": "content",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true,
                  "comment": "Post body in markdown format"
                },
                {
                  "name": "author_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Foreign key to users table"
                },
                {
                  "name": "published_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true,
                  "comment": "Publication timestamp, NULL for drafts"
                }
              ],
              "constraints": {
                "posts_pkey": {
                  "schema": "public",
                  "table": "posts",
                  "name": "posts_pkey",
                  "type": "PRIMARY_KEY",
                  "columns": [
                    {
                      "name": "id",
                      "position": 1
                    }
                  ]
                }
              },
              "indexes": {
                "idx_posts_author": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_author",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "author_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Index for finding posts by author"
                },
                "idx_posts_published": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_published",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "published_at",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Partial index for published posts only"
                }
              },
              "triggers": {},
              "rls_enabled": false,
              "policies": {},
              "dependencies": null,
              "comment": "Blog posts and articles",
              "is_partitioned": false
            },
            "AddedColumns": [],
            "DroppedColumns": [],
            "ModifiedColumns": [
              {
                "Old": {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "precision": 32,
                  "scale": 0
                },
                "New": {
                  "name": "id",
                  "position": 1,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Unique post identifier"
                }
              },
              {
                "Old": {
                  "name": "title",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 200
                },
                "New": {
                  "name": "title",
                  "position": 2,
                  "data_type": "varchar",
                  "is_nullable": false,
                  "max_length": 200,
                  "comment": "Post title, max 200 characters"
                }
              },
              {
                "Old": {
                  "name": "content",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true
                },
                "New": {
                  "name": "content",
                  "position": 3,
                  "data_type": "text",
                  "is_nullable": true,
                  "comment": "Post body in markdown format"
                }
              },
              {
                "Old": {
                  "name": "author_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": false,
                  "precision": 32,
                  "scale": 0
                },
                "New": {
                  "name": "author_id",
                  "position": 4,
                  "data_type": "integer",
                  "is_nullable": false,
                  "comment": "Foreign key to users table"
                }
              },
              {
                "Old": {
                  "name": "published_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true
                },
                "New": {
                  "name": "published_at",
                  "position": 5,
                  "data_type": "timestamp",
                  "is_nullable": true,
                  "comment": "Publication timestamp, NULL for drafts"
                }
              }
            ],
            "AddedConstraints": [],
            "DroppedConstraints": [],
            "ModifiedConstraints": [],
            "AddedIndexes": [],
            "DroppedIndexes": [],
            "ModifiedIndexes": [
              {
                "Old": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_author",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "author_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false
                },
                "New": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_author",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "author_id",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Index for finding posts by author"
                }
              },
              {
                "Old": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_published",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "published_at",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false
                },
                "New": {
                  "schema": "public",
                  "table": "posts",
                  "name": "idx_posts_published",
                  "type": "REGULAR",
                  "method": "btree",
                  "columns": [
                    {
                      "name": "published_at",
                      "position": 1,
                      "direction": "ASC"
                    }
                  ],
                  "is_partial": false,
                  "is_expression": false,
                  "comment": "Partial index for published posts only"
                }
              }
            ],
            "AddedTriggers": [],
            "DroppedTriggers": [],
            "ModifiedTriggers": [],
            "AddedPolicies": [],
            "DroppedPolicies": [],
            "ModifiedPolicies": [],
            "RLSChanges": [],
            "CommentChanged": true,
            "OldComment": "",
            "NewComment": "Blog posts and articles"
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN posts.id IS 'Unique post identifier'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.posts.id",
          "source": {
            "Old": {
              "name": "id",
              "position": 1,
              "data_type": "integer",
              "is_nullable": false,
              "precision": 32,
              "scale": 0
            },
            "New": {
              "name": "id",
              "position": 1,
              "data_type": "integer",
              "is_nullable": false,
              "comment": "Unique post identifier"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN posts.title IS 'Post title, max 200 characters'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.posts.title",
          "source": {
            "Old": {
              "name": "title",
              "position": 2,
              "data_type": "varchar",
              "is_nullable": false,
              "max_length": 200
            },
            "New": {
              "name": "title",
              "position": 2,
              "data_type": "varchar",
              "is_nullable": false,
              "max_length": 200,
              "comment": "Post title, max 200 characters"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN posts.content IS 'Post body in markdown format'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.posts.content",
          "source": {
            "Old": {
              "name": "content",
              "position": 3,
              "data_type": "text",
              "is_nullable": true
            },
            "New": {
              "name": "content",
              "position": 3,
              "data_type": "text",
              "is_nullable": true,
              "comment": "Post body in markdown format"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN posts.author_id IS 'Foreign key to users table'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.posts.author_id",
          "source": {
            "Old": {
              "name": "author_id",
              "position": 4,
              "data_type": "integer",
              "is_nullable": false,
              "precision": 32,
              "scale": 0
            },
            "New": {
              "name": "author_id",
              "position": 4,
              "data_type": "integer",
              "is_nullable": false,
              "comment": "Foreign key to users table"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON COLUMN posts.published_at IS 'Publication timestamp, NULL for drafts'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.column.comment",
          "operation": "alter",
          "path": "public.posts.published_at",
          "source": {
            "Old": {
              "name": "published_at",
              "position": 5,
              "data_type": "timestamp",
              "is_nullable": true
            },
            "New": {
              "name": "published_at",
              "position": 5,
              "data_type": "timestamp",
              "is_nullable": true,
              "comment": "Publication timestamp, NULL for drafts"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON INDEX idx_posts_author IS 'Index for finding posts by author'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.index.comment",
          "operation": "alter",
          "path": "public.posts.idx_posts_author",
          "source": {
            "Old": {
              "schema": "public",
              "table": "posts",
              "name": "idx_posts_author",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "author_id",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false
            },
            "New": {
              "schema": "public",
              "table": "posts",
              "name": "idx_posts_author",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "author_id",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false,
              "comment": "Index for finding posts by author"
            }
          }
        },
        {
          "statements": [
            {
              "sql": "COMMENT ON INDEX idx_posts_published IS 'Partial index for published posts only'",
              "can_run_in_transaction": true
            }
          ],
          "type": "table.index.comment",
          "operation": "alter",
          "path": "public.posts.idx_posts_published",
          "source": {
            "Old": {
              "schema": "public",
              "table": "posts",
              "name": "idx_posts_published",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "published_at",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false
            },
            "New": {
              "schema": "public",
              "table": "posts",
              "name": "idx_posts_published",
              "type": "REGULAR",
              "method": "btree",
              "columns": [
                {
                  "name": "published_at",
                  "position": 1,
                  "direction": "ASC"
                }
              ],
              "is_partial": false,
              "is_expression": false,
              "comment": "Partial index for published posts only"
            }
          }
        }
      ]
    }
  ]
}
