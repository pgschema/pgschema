{
  "version": "1.0.0",
  "pgschema_version": "1.7.0",
  "created_at": "1970-01-01T00:00:00Z",
  "source_fingerprint": {
    "hash": "66e7d57ad55a56551d40de026dab84610355b0d511ccea489d7d0e4ac6bc0db8"
  },
  "groups": [
    {
      "steps": [
        {
          "sql": "CREATE OR REPLACE TRIGGER trg_user_emails_insert\n    INSTEAD OF INSERT ON user_emails\n    FOR EACH ROW\n    EXECUTE FUNCTION insert_user_emails();",
          "type": "view.trigger",
          "operation": "create",
          "path": "public.user_emails.trg_user_emails_insert"
        },
        {
          "sql": "CREATE OR REPLACE FUNCTION insert_user_emails()\nRETURNS trigger\nLANGUAGE plpgsql\nVOLATILE\nAS $$\nBEGIN\n    INSERT INTO users (email)\n    VALUES (NEW.email)\n    RETURNING id, email INTO NEW.id, NEW.email;\n    RETURN NEW;\nEND;\n$$;",
          "type": "function",
          "operation": "alter",
          "path": "public.insert_user_emails"
        }
      ]
    }
  ]
}
