{
  "version": "1.0.0",
  "pgschema_version": "1.7.2",
  "created_at": "1970-01-01T00:00:00Z",
  "source_fingerprint": {
    "hash": "965b1131737c955e24c7f827c55bd78e4cb49a75adfd04229e0ba297376f5085"
  },
  "groups": [
    {
      "steps": [
        {
          "sql": "CREATE TABLE IF NOT EXISTS activity_x (\n    id integer,\n    title text NOT NULL,\n    priority_user_id integer,\n    CONSTRAINT activity_x_pkey PRIMARY KEY (id)\n);",
          "type": "table",
          "operation": "create",
          "path": "public.activity_x"
        },
        {
          "sql": "CREATE TABLE IF NOT EXISTS priority (\n    id integer,\n    name text NOT NULL,\n    level integer NOT NULL,\n    CONSTRAINT priority_pkey PRIMARY KEY (id)\n);",
          "type": "table",
          "operation": "create",
          "path": "public.priority"
        },
        {
          "sql": "CREATE TABLE IF NOT EXISTS priority_user (\n    id integer,\n    user_id integer NOT NULL,\n    priority_id integer,\n    CONSTRAINT priority_user_pkey PRIMARY KEY (id),\n    CONSTRAINT priority_user_priority_id_fkey FOREIGN KEY (priority_id) REFERENCES priority (id)\n);",
          "type": "table",
          "operation": "create",
          "path": "public.priority_user"
        },
        {
          "sql": "CREATE OR REPLACE VIEW priority_expanded AS\n SELECT pu.id,\n    pu.user_id,\n    p.name AS priority_name,\n    p.level\n   FROM priority_user pu\n     JOIN priority p ON p.id = pu.priority_id;",
          "type": "view",
          "operation": "create",
          "path": "public.priority_expanded"
        },
        {
          "sql": "CREATE OR REPLACE VIEW activity AS\n SELECT a.id,\n    a.title,\n    upe.priority_name\n   FROM activity_x a\n     JOIN priority_expanded upe ON upe.id = a.priority_user_id;",
          "type": "view",
          "operation": "create",
          "path": "public.activity"
        }
      ]
    }
  ]
}
