Plan: 3 to add.

Summary by type:
  functions: 3 to add

Functions:
  + days_since_special_date
  + process_order
  + safe_add

DDL to be executed:
--------------------------------------------------

CREATE OR REPLACE FUNCTION days_since_special_date()
RETURNS SETOF timestamp with time zone
LANGUAGE sql
STABLE
LEAKPROOF
PARALLEL SAFE
RETURN generate_series((date_trunc('day'::text, '2025-01-01 00:00:00'::timestamp without time zone))::timestamp with time zone, date_trunc('day'::text, now()), '1 day'::interval);

CREATE OR REPLACE FUNCTION process_order(
    order_id integer,
    discount_percent numeric DEFAULT 0,
    priority_level integer DEFAULT 1,
    note varchar DEFAULT '',
    status text DEFAULT 'pending',
    apply_tax boolean DEFAULT true,
    is_priority boolean DEFAULT false
)
RETURNS numeric
LANGUAGE plpgsql
VOLATILE
STRICT
SECURITY DEFINER
LEAKPROOF
PARALLEL RESTRICTED
AS $$
DECLARE
    total numeric;
BEGIN
    SELECT amount INTO total FROM orders WHERE id = order_id;
    RETURN total - (total * discount_percent / 100);
END;
$$;

CREATE OR REPLACE FUNCTION safe_add(
    a integer,
    b integer
)
RETURNS integer
LANGUAGE sql
IMMUTABLE
STRICT
LEAKPROOF
PARALLEL SAFE
AS $$
    SELECT a + b;
$$;
