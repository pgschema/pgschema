# Test Data

This directory contains sample database schemas for testing and validation of the pgschema tool.

## Directory Structure

Each subfolder contains a complete schema test case with the following files:

- `manifest.json` - Test metadata including database connection details
- `raw.sql` - Original DDL statements used to create the schema
- `pgdump.sql` - Reference output generated by PostgreSQL's `pg_dump` tool
- `pgschema.sql` - Output generated by `pgschema inspect` (when available)

## Generating Reference Output

The `pgdump.sql` files are generated using PostgreSQL's `pg_dump` tool with the following command:

```bash
export PGPASSWORD='testpwd1'
pg_dump \
  --schema-only \
  --no-owner \
  --no-privileges \
  --no-tablespaces \
  --disable-triggers \
  --host=localhost \
  --port=5432 \
  --username=postgres \
  <<database>> > pgdump.sql
```

The `pgschema.sql` files are generated by running:

```bash
export PGPASSWORD='testpwd1'
pgschema inspect --host localhost -p 5432 -U postgres -d <<database>>
```

## Usage in Tests

These test cases are used by the integration tests to validate that pgschema produces output is semantically equivalent (but not exactly the same) to pg_dump.